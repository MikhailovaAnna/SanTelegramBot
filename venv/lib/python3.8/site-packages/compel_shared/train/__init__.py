def insert_entity(line, from_, to, entity):
    line[from_:to] = f'${{{entity}}}'


def extract_values_from_entities(line, entities, _import=False):
    label_sample = {}
    if entities:
        for [start, end, label] in entities:
            ent = line[start:end]
            label = label.replace('.', "$")
            if label_sample.get(label):
                label_sample[label].append(ent)
            else:
                label_sample[label] = [ent]
    return label_sample


def get_train_template(entities: list, line: str):
    line_param = list(line)
    line_mpn = list(line)
    if entities:
        for en in reversed(sorted(entities)):
            from_, to, entity = en
            insert_entity(line_mpn, from_, to, entity) if entity == '_mpn' else insert_entity(line_param, from_, to, entity)
    else:
        line_param = line
        line_mpn = line
    return {'param': ''.join(line_param), 'mpn': ''.join(line_mpn)}