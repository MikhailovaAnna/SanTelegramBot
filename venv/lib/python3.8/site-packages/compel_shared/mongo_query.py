class OP:
    '''
    Автоматическая обработка пустых списков для $and/$or которые не любит монга.
    '''
    op = None

    def __init__(self, queries):
        if not isinstance(queries, list):
            queries = [queries]
        self.queries = queries

    def query(self):
        queries = [i for i in self.queries if i]
        if not queries:
            return {}
        return {self.op: queries} if len(queries) > 1 else queries[0]


class AND(OP):
    op = '$and'


class OR(OP):
    op = '$or'
