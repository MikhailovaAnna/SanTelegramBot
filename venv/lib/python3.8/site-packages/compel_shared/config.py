from environs import Env

env = Env()
env.read_env()

DB_URL = env('DB_URL', None)  # for backward compatibility, example 'mongodb://localhost:27017/'
DB_HOST = env('DB_HOST', 'localhost')
DB_PORT = env.int('DB_PORT', 27017)
DB_NAME = env('DB_NAME', 'catalog')

NATS_SERVERS = env('NATS_SERVERS', 'nats://127.0.0.1:4222')

ELASTIC_HOST = env('ELASTIC_HOST', 'localhost')
ELASTIC_PORT = env.int('ELASTIC_PORT', 9200)
ELASTIC_INDEX_NAME = env('ELASTIC_INDEX_NAME', 'local_product')
ES_RECOG_SUFFIX = '_recog'
ES_INDEX_CATALOG = ELASTIC_INDEX_NAME
ES_INDEX_RECOG = ELASTIC_INDEX_NAME + ES_RECOG_SUFFIX
ES_INDEX_MAN = f'{ELASTIC_INDEX_NAME}_man'
ES_INDEX_MPN = f'{ELASTIC_INDEX_NAME}_mpn'

ETCD_HOST = env('ETCD_HOST', 'localhost')
ETCD_PORT = env('ETCD_PORT', 2379)
ETCD_CERT_DIR = env('ETCD_CERT_DIR', None)

SERVICE_HOST = env('SERVICE_HOST', 'localhost')
SERVICE_PORT = env('SERVICE_PORT', 8080)

IMPORT_SERVICE_URL = env('IMPORT_SERVICE_URL', 'http://localhost:8088')

GITLAB_URL = env('GITLAB_URL', None)
GITLAB_TOKEN = env('GITLAB_TOKEN', None)
GITLAB_RECOG_PROJECT_ID = 169
BRANCH_NAME = env('BRANCH_NAME', None)

API_PREFIX = 'api'
DOC_PREFIX = 'docs'

HOME_PATH = '/'
INDEX_PATH = HOME_PATH
API_PATH = '/api'
DOCS_PATH = '/docs'

LIVENESS_TEST = f'{API_PATH}/test'
VERSION_PATH = f'{API_PATH}/version'
METRICS_PATH = f'{API_PATH}/metrics'
PERFORMANCE_PATH = f'{API_PATH}/performance'

WORKERS = env.int('WORKERS', 1)
KEEPALIVE = env.int('KEEPALIVE', 1)

LANGS = ['en', 'ru']
TECHS = ['m10', 'ems']

PROMETHEUS_MULTIPROC_DIR = 'prometheus_multiproc_dir'
PROMETHEUS_MULTIPROC_PATH = env(PROMETHEUS_MULTIPROC_DIR, None)

MINIO_ACCESS_KEY = env('MINIO_ACCESS_KEY', None)
MINIO_SECRET_KEY = env('MINIO_SECRET_KEY', None)
MINIO_URL = env('MINIO_URL', 's3minio.cod-test.rbasoft.com')
MINIO_BUCKET = env('MINIO_BUCKET', 'inventory')

CLIENT_MAX_SIZE = env('CLIENT_MAX_SIZE', 1024 ** 2)

PORT_CATALOG = 8081
PORT_EXT_CATALOG = 8082
PORT_SEARCH = 8083
PORT_BOM = 8084
PORT_RECOG = 8085
PORT_ADMIN = 8086
PORT_QUOTE = 8087
PORT_MOUNT = 8088
